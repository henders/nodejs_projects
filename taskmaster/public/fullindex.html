<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!-- Consider adding an manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <!-- Use the .htaccess and remove these lines to avoid edge case issues.
       More info: h5bp.com/b/378 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>Task Master App</title>
  <meta name="description" content="">
  <meta name="author" content="Shane Hender">

  <!-- Mobile viewport optimized: j.mp/bplateviewport -->
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <!-- Place favicon.ico and apple-touch-icon.png in the root directory: mathiasbynens.be/notes/touch-icons -->

  <!-- CSS: implied media=all -->
	<!-- CSS concatenated and minified via ant build script-->
	<link rel='stylesheet' href="/css/humanity/jquery-ui-1.8.16.custom.css" />
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.css" />
	<link rel='stylesheet' href="/css/basestyle.css" />
	<link rel='stylesheet' href="/css/jquery.jqplot.min.css" />
	<!-- end CSS-->

  <!-- More ideas for your <head> here: h5bp.com/d/head-Tips -->

  <!-- All JavaScript at the bottom, except for Modernizr / Respond.
       Modernizr enables HTML5 elements & feature detects; Respond is a polyfill for min/max-width CSS3 Media Queries
       For optimal performance, use a custom Modernizr build: www.modernizr.com/download/ -->
  <script src="js/libs/modernizr-2.0.6.min.js"></script>
</head>

<body> 
	<div id="container">
		<div data-role="page" id="loginPage">
			<div data-role="header" data-position="fixed" data-title="Login"><h3>Login</h3></div>
			<div data-role="content">
				<form action="/login" method="post" name="loginForm" id="loginForm" accept-charset="utf-8">
					<div class="ui-bar ui-grid-a">
						<div class="ui-block-a"><input type="email" id="email" name="email" value="" placeholder="Enter email to login..."></div>
						<div class="ui-block-b"><button type="submit" id="submit">Login &rarr;</button></div>
					</div>
				</form>
			</div>
			<div data-role="footer" data-id="footer" class="footer" data-position="fixed">
				<footer>
				<nav>
				<div data-role="navbar">
					<ul>
						<li><a href="/newindex.html#addChorePage" id="home_icon">Add Chore</a></li>
						<li><a href="/newindex.html#choresPage" id="chores_icon">View Chores</a></li>
						<li><a href="/newindex.html#friendsPage" id="friends_icon">Friends</a></li>
						<li><a href="/newindex.html#loginPage" id="logout_icon">Logout</a></li>
					</ul>
				</div>
				</nav>
				</footer>
			</div>
		</div>

		<div data-role="page" id="addChorePage">
			<div data-role="header" data-position="fixed" data-title="Login"><h3>Add Chore</h3></div>
			<div data-role="content">
				<div id="addChore">
					<form action="/do_chore" id="createTaskForm" method="post" name="createTask">
						<fieldset  data-role="fieldcontain">
							<label for="choreName">What was done?</label>
							<input type="text" id="choreName" name="chore" autofocus required placeholder="Start typing for autocomplete...">
						</fieldset>
						<fieldset data-role="fieldcontain">
							<label for="personName" class="select">Who did it? </label>
							<select name="personName" id="personName">
								<option id="personOption" value="">Me</option>
							</select>
						</fieldset>
						<fieldset data-role="fieldcontain">
							<label for="timeSlider">Time (in minutes): </label>
							<input type="range" name="timeSlider" id="timeSlider" value="30" min="10" max="120"/>
						</fieldset>
						<input type="submit" id='choreSubmit' value="Do it!"/>
					</form>
				</div>

				<br/>

				<br/>
				<header>
					<hgroup>
						<h4><u>Leader Board</u></h4>
					</hgroup>
				</header>
				<div id="leaderboardDiv" title="Leader Board" class="graph"></div>
			</div>
			<div data-role="footer" data-id="footer" class="footer" data-position="fixed">
				<footer>
				<nav>
				<div data-role="navbar">
					<ul>
						<li><a href="/newindex.html#addChorePage" id="home_icon">Add Chore</a></li>
						<li><a href="/newindex.html#choresPage" id="chores_icon">View Chores</a></li>
						<li><a href="/newindex.html#friendsPage" id="friends_icon">Friends</a></li>
						<li><a href="/newindex.html#loginPage" id="logout_icon">Logout</a></li>
					</ul>
				</div>
				</nav>
				</footer>
			</div>
		</div>

		<div data-role="page" id="choresPage">
			<div data-role="header" data-position="fixed" data-title="Login"><h3>Chores</h3></div>
			<div data-role="content">
				
				<div id="pie">
					<div id="chorePie" class="graph"></div>
				</div>


				<h4>Completed:</h4>
				<ul data-role="listview" id="chores">
				</ul>

			</div>
			<div data-role="footer" data-id="footer" class="footer" data-position="fixed">
				<footer>
				<nav>
				<div data-role="navbar">
					<ul>
						<li><a href="/newindex.html#addChorePage" id="home_icon">Add Chore</a></li>
						<li><a href="/newindex.html#choresPage" id="chores_icon">View Chores</a></li>
						<li><a href="/newindex.html#friendsPage" id="friends_icon">Friends</a></li>
						<li><a href="/newindex.html#loginPage" id="logout_icon">Logout</a></li>
					</ul>
				</div>
				</nav>
				</footer>
			</div>
		</div>

		<div data-role="page" id="friendsPage">
			<div data-role="header" data-position="fixed" data-title="Login"><h3>Friends</h3></div>
			<div data-role="content"></div>
			<div data-role="footer" data-id="footer" class="footer" data-position="fixed"></div>
		</div>
	</div> <!--! end of #container -->


  <!-- JavaScript at the bottom for fast page loading -->

  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
 	<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script type="text/javascript" src="/js/libs/jquery.cookie-1.0.js"></script>
	<script type="text/javascript" src="/js/libs/underscore-min.js"></script>
	<script type="text/javascript" src="/js/libs/jquery-ui-1.8.16.custom.min.js"></script>
	<script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.js"></script>
	<script type="text/javascript" src="/js/libs/crypto-min.js"></script>
	<script type="text/javascript" src="/js/libs/crypto-sha256-hmac.js"></script>
	<script type="text/javascript" src="/js/libs/flot/jquery.flot.min.js"></script>
	<script type="text/javascript" src="/js/libs/flot/jquery.flot.pie.min.js"></script>
 	<script type="text/javascript" src="/js/jquery.jqplot.min.js"></script>
 	<script type="text/javascript" src="/js/utils.js"></script>
 	<script type="text/javascript" src="/js/login.js"></script>
 	<script type="text/javascript" src="/js/addchores.js"></script>
 	<script type="text/javascript" src="/js/chores.js"></script>

  <!-- scripts concatenated and minified via ant build script-->
  <script defer src="js/plugins.js"></script>
  <script defer src="js/script.js"></script>
  <!-- end scripts-->

	<script type="text/template" id="header_template">
		<footer>
			<nav>
				<div data-role="navbar">
					<ul>
						<li><a href="/newindex.html#addChorePage" id="home_icon">Add Chore</a></li>
						<li><a href="/newindex.html#choresPage" id="chores_icon">View Chores</a></li>
						<li><a href="/newindex.html#friendsPage" id="friends_icon">Friends</a></li>
						<li><a href="/newindex.html#loginPage" id="logout_icon">Logout</a></li>
					</ul>
				</div>
			</nav>
		</footer>
	</script>

	<script type="text/javascript" charset="utf-8">
		// our global object
		var taskmaster = JSON.parse($.cookie('taskmaster')) || {};

		function createSignature(path, paramObject) {
			var now = new Date();
			paramObject.timestamp = now.getTime();
			// Create query string from object
			var queryString = "?";
			var keys = _.keys(paramObject);
			console.log("keys = " + JSON.stringify(keys));
			keys.sort();
			_.each(keys, function(key) { queryString += key + "=" + paramObject[key] + "&"; });

			var sig = path + queryString;
			console.log('hashing sig: ' + sig);
			return Crypto.HMAC(Crypto.SHA256, sig, taskmaster.user.secretkey);
		}

		function showMsg(message) {
			//show error message
			$( "<div class='ui-loader ui-overlay-shadow ui-body-e ui-corner-all'><h1>"+ message +"</h1></div>" )
			.css({ "display": "block", "opacity": 0.96, "topq": $( window ).scrollTop() + 100 })
			.appendTo( $.mobile.pageContainer )
			.delay( 800 )
			.fadeOut( 1200, function() {
				$( this ).remove();
			});
		}

		console.log('loading pages....');
		loginPageInit();
		addChorePageInit();
		initShowChores();

	</script>


  <!-- Change UA-XXXXX-X to be your site's ID -->
  <script>
    window._gaq = [['_setAccount','UA-26875404-1'],['_trackPageview'],['_trackPageLoadTime']];
    Modernizr.load({
      load: ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js'
    });
  </script>


  <!-- Prompt IE 6 users to install Chrome Frame. Remove this if you want to support IE 6.
       chromium.org/developers/how-tos/chrome-frame-getting-started -->
  <!--[if lt IE 7 ]>
    <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
    <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
  <![endif]-->
  
</body>
</html>


